<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="https://batsense.net/main.css" />
    <link
      rel="stylesheet"
      media="screen and (max-width: 1200px)"
      href="https://batsense.net/mobile.css"
    />

	<meta name="referrer" content="no-referrer-when-downgrade" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

    




   
	<meta charset="UTF-8" />
	<title>Ideal backup situation :: realaravinth | Aravinth Manivannan </title>
	<meta name="referrer" content="no-referrer-when-downgrade" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<meta name="description" content="Ideal backup situation" />
    <meta name="author" content="Aravinth Manivannan" />

	<meta property="og:title" content="Ideal backup situation :: realaravinth | Aravinth Manivannan " />
	<meta property="og:type" content="article" />
    <meta property="og:url" content="https:&#x2F;&#x2F;batsense.net" />
	<meta property="og:image" content="
  https://batsense.net/android-chrome-192x192.png?h=c0fdb61ed8b4e52d9d18dabcf759acf8b99f426d8210f2f922c823873e1341ab" 
" />
	<meta property="og:description" content="Ideal backup situation" />
	<meta property="og:site_name" content="realaravinth | Aravinth Manivannan" />




  </head>
  <body class="base">
    <header>
      <nav class="nav__container">
  <input type="checkbox" class="nav__toggle" id="nav__toggle" />

  <div class="nav__header">
    <a class="nav__logo-container" href="/">
      <p class="nav__home-btn">>realaravinth</p>
      <p class="nav__cursor" style=" "></p>
    </a>
    <label class="nav__hamburger-menu" for="nav__toggle">
      <span class="nav__hamburger-inner"></span>
    </label>
  </div>

  <div class="nav__spacer"></div>

  <div class="nav__link-group">


  
  <div class="nav__link-container">
    <a class="nav__link" rel="noreferrer" href="&#x2F;about&#x2F;">About</a>
  </div>

  
  <div class="nav__link-container">
    <a class="nav__link" rel="noreferrer" href="&#x2F;blog&#x2F;">Blog</a>
  </div>

  
  <div class="nav__link-container">
    <a class="nav__link" rel="noreferrer" href="&#x2F;contact&#x2F;">Contact</a>
  </div>

  
  <div class="nav__link-container">
    <a class="nav__link" rel="noreferrer" href="&#x2F;donate&#x2F;">Donate</a>
  </div>

  
  <div class="nav__link-container">
    <a class="nav__link" rel="noreferrer" href="&#x2F;services&#x2F;">Services</a>
  </div>


  </div>
</nav>

    </header>
    <!-- See ../sass/main.scss. Required for pushing footer to the very 
      bottom of the page -->
    <div class="main__content-container">
      <main>
        

<div class="page__container">
  <h1 class="page__group-title">Ideal backup situation</h1>
  <p class="blog__post-meta"> 
   10 
	 September
	
,
   2021 &middot; <b>3 min read</b>
  </p>

  <div class="blog__content">
    <p>I've been playing fast and loose with backups, and I've been extremely
fortunate to have not suffered any serious system failures or data
loses. I recently recovered from systems failures on my Raspberry Pis
caused by upgrading Debian Buster to Bullseye. The outage wasn't a
because of a bug in Bullseye, the upgrade modified some parameters
<code>/boot/firmware/config.txt</code> which, for some reason, prevented the board
from booting.</p>
<p>Also around the same period, my place was being renovated, and the
construction workers had nicked the main power supply lines. As a
result, we were experiencing some wild voltage fluctuations and power
outages. I thought I burnt my boards from either one of these two
things. It was time to set up a proper backup mechanism.</p>
<h2 id="requirement">Requirement</h2>
<p>I have roughly 3 TB of storage across multiple devices and none of these
were being backed up. Going by the
<a href="https://en.wikipedia.org/wiki/Backup#3-2-1_rule">3-2-1</a>, I would
require at least 9 TB + 3 TB of storage(3*3 + some additional space for
versioned backups --- most backup systems these days are chunk snapshot
systems so versioning is very efficient). But since I'm broke and can't
afford offsite storage, my requirements are down to 6 TB + 2 TB.</p>
<h2 id="my-current-solution">My current solution</h2>
<p>I bought two 4 TB disks and setup <a href="https://www.borgbackup.org/">Borg</a>
backup jobs to run at night. I currently have 7 daily, 4 weekly and 4
monthly snapshots on the first disk and the second disk contains 4
weekly and 4 monthly snapshots, and is unplugged and stored at a
different part of the house.</p>
<p>Ideally, it should be plugged in at a different part of the house, away
from my server rack, but I neither have the hardware nor the
infrastructure to implement that.</p>
<h2 id="ideal-solution">Ideal solution</h2>
<p>My current set up will work in most cases. I live in a calm neighborhood
in a very safe city(not prone to natural calamities and such) but
<em>ideally</em> there should be at least one copy of offsite backup. So I did
some math to see how much it would cost me:</p>
<h3 id="aws-s3">AWS S3</h3>
<p>AWS is usually the cheapest and there's probably an adapter available
for Borg</p>
<ul>
<li><strong>pricing:</strong> <a href="https://aws.amazon.com/s3/pricing/">$0.023/GB-month for the first
50 TB</a></li>
<li><strong>cost:</strong> $0.023 * 3 * 1024 = $70.656/month</li>
</ul>
<p>But I don't like AWS or anything Amazon</p>
<h3 id="tarsnap">Tarsnap</h3>
<p>Tarsnap is developed by <a href="https://www.daemonology.net/blog/">Dr. Colin
Percival</a> and is quite popular.</p>
<ul>
<li><strong>pricing:</strong> <a href="https://www.tarsnap.com/">$0.25/GB-month + $0.25/GB
bandwidth</a></li>
<li><strong>cost:</strong> $0.25 * 3 * 1024 = $768/month + bandwidth costs</li>
</ul>
<p>And is also quite expensive!</p>
<p>I can't afford either of these solutions. My current setup set cost me
roughly â‚¹16,000 or $220 or the two months worth of AWS rent. Which is
ridiculous. So here's my proposal:</p>
<p>As the internet becomes more diverse and more decentralised, home
servers will become a common thing. This means more folks, like myself,
will be on the lookout for cheap backup and failover solutions.
Normally, these home servers won't be at 100% utilization(I'm currently
at 20% across the fleet) so forming rings of trust among friends and
family will be mutually beneficial. This way, the participants within
the ring can rely on each other's facilities for backups and
failover situations for a fraction of what a cloud-based solution would
cost.</p>
<p>Of course, there should be proper measures taken to prevent unauthorized
access and trespassing, but they are implementation details.</p>

  </div>
  <br>
  <br>
  <div class="blog__post-tag-container">
     
       <a class="blog__post-tag" href="/tags/self-hosting">#self-hosting</a>
     
       <a class="blog__post-tag" href="/tags/rant">#rant</a>
     
       <a class="blog__post-tag" href="/tags/sysadmin">#sysadmin</a>
     
  </div>

</div>


      </main>
      <footer>
  <div class="footer__container">
    <div class="footer__column">
      <span class="license__conatiner">
        All text &nbsp;
        <a
          class="license__link"
          rel="noreferrer"
          rel="noreferrer"
          href="http://creativecommons.org/licenses/by-sa/4.0/"
          target="_blank"
          >CC-BY-SA</a
        >
        &nbsp;&amp; code&nbsp;
        <a
          class="license__link"
          rel="noreferrer"
          href="https://www.gnu.org/licenses/agpl-3.0.en.html"
          target="_blank"
          >AGPL</a
        >
        <span class="footer__column-divider--mobile-visible">|</span>
        <a
          class="license__link"
          rel="noreferrer"
          href="https://www.eff.org/issues/do-not-track/amp/"
          target="_blank"
          >No AMP</a
        >
      </span>
        <div class="footer__column-divider">|</div>
      <p class="footer__disclaimer">All opinions expressed are personal</p>
    </div>
    <div class="footer__column">
      <a href="/blog/atom.xml" target="_blank" rel="noopener" title="RSS">
        <img
          src="https://batsense.net/icons/rss.svg?h=f6cd584bdbcd2eb4d1b8b84c9cf083ef45f772167c33fdcee754b35ae8ff4c7d"
          class="footer__icon"
          alt="Email icon"
        />
      </a>
    </div>
  </div>
</footer>

    </div>
  </body>
</html>
