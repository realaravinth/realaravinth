<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Aravinth Manivannan ">
<meta name="description" content="I&amp;rsquo;ve been playing fast and loose with backups, and I&amp;rsquo;ve been extremely fortunate to have not suffered any serious system failures or data loses. I recently recovered from systems failures on my Raspberry Pis caused by upgrading Debian Buster to Bullseye. The outage wasn&amp;rsquo;t a because of a bug in Bullseye, the upgrade modified some parameters /boot/firmware/config.txt which, for some reason, prevented the board from booting.
Also around the same period, my place was being renovated, and the construction workers had nicked the main power supply lines." />
<meta name="keywords" content=", self-hosting, rant, sysadmin" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://batsense.net/blog/10-09-2021-ideal-backup-situation/" />


    <title>
        
            Ideal backup situation :: realaravinth | Aravinth Manivannan 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.29c2c8c3fc9cf748254138351f142ac2833b208a68e83aec126edc98b59efef2.css">






<meta itemprop="name" content="Ideal backup situation">
<meta itemprop="description" content="I&rsquo;ve been playing fast and loose with backups, and I&rsquo;ve been extremely fortunate to have not suffered any serious system failures or data loses. I recently recovered from systems failures on my Raspberry Pis caused by upgrading Debian Buster to Bullseye. The outage wasn&rsquo;t a because of a bug in Bullseye, the upgrade modified some parameters /boot/firmware/config.txt which, for some reason, prevented the board from booting.
Also around the same period, my place was being renovated, and the construction workers had nicked the main power supply lines.">
<meta itemprop="datePublished" content="2021-09-10T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-09-10T00:00:00+00:00" />
<meta itemprop="wordCount" content="549">
<meta itemprop="image" content="https://batsense.net/"/>



<meta itemprop="keywords" content="self-hosting,rant,sysadmin," />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://batsense.net/"/>

<meta name="twitter:title" content="Ideal backup situation"/>
<meta name="twitter:description" content="I&rsquo;ve been playing fast and loose with backups, and I&rsquo;ve been extremely fortunate to have not suffered any serious system failures or data loses. I recently recovered from systems failures on my Raspberry Pis caused by upgrading Debian Buster to Bullseye. The outage wasn&rsquo;t a because of a bug in Bullseye, the upgrade modified some parameters /boot/firmware/config.txt which, for some reason, prevented the board from booting.
Also around the same period, my place was being renovated, and the construction workers had nicked the main power supply lines."/>




    <meta property="og:title" content="Ideal backup situation" />
<meta property="og:description" content="I&rsquo;ve been playing fast and loose with backups, and I&rsquo;ve been extremely fortunate to have not suffered any serious system failures or data loses. I recently recovered from systems failures on my Raspberry Pis caused by upgrading Debian Buster to Bullseye. The outage wasn&rsquo;t a because of a bug in Bullseye, the upgrade modified some parameters /boot/firmware/config.txt which, for some reason, prevented the board from booting.
Also around the same period, my place was being renovated, and the construction workers had nicked the main power supply lines." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://batsense.net/blog/10-09-2021-ideal-backup-situation/" />
<meta property="og:image" content="https://batsense.net/"/>
<meta property="article:published_time" content="2021-09-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-09-10T00:00:00+00:00" /><meta property="og:site_name" content="realaravinth | Aravinth Manivannan" />






    <meta property="article:published_time" content="2021-09-10 00:00:00 &#43;0000 UTC" />










    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">realaravinth</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about">About</a></li><li><a href="/blog">Blog</a></li><li><a href="/contact">Contact</a></li><li><a href="/donate">Donate</a></li><li><a href="/services">Services</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://batsense.net/blog/10-09-2021-ideal-backup-situation/">Ideal backup situation</a></h2>

            
            
            

            <div class="post-content">
                <p>I&rsquo;ve been playing fast and loose with backups, and I&rsquo;ve been extremely
fortunate to have not suffered any serious system failures or data
loses. I recently recovered from systems failures on my Raspberry Pis
caused by upgrading Debian Buster to Bullseye. The outage wasn&rsquo;t a
because of a bug in Bullseye, the upgrade modified some parameters
<code>/boot/firmware/config.txt</code> which, for some reason, prevented the board
from booting.</p>
<p>Also around the same period, my place was being renovated, and the
construction workers had nicked the main power supply lines. As a
result, we were experiencing some wild voltage fluctuations and power
outages. I thought I burnt my boards from either one of these two
things. It was time to set up a proper backup mechanism.</p>
<h2 id="requirement">Requirement</h2>
<p>I have roughly 3 TB of storage across multiple devices and none of these
were being backed up. Going by the
<a href="https://en.wikipedia.org/wiki/Backup#3-2-1_rule">3-2-1</a>, I would
require at least 9 TB + 3 TB of storage(3*3 + some additional space for
versioned backups &mdash; most backup systems these days are chunk snapshot
systems so versioning is very efficient). But since I&rsquo;m broke and can&rsquo;t
afford offsite storage, my requirements are down to 6 TB + 2 TB.</p>
<h2 id="my-current-solution">My current solution</h2>
<p>I bought two 4 TB disks and setup <a href="https://www.borgbackup.org/">Borg</a>
backup jobs to run at night. I currently have 7 daily, 4 weekly and 4
monthly snapshots on the first disk and the second disk contains 4
weekly and 4 monthly snapshots, and is unplugged and stored at a
different part of the house.</p>
<p>Ideally, it should be plugged in at a different part of the house, away
from my server rack, but I neither have the hardware nor the
infrastructure to implement that.</p>
<h2 id="ideal-solution">Ideal solution</h2>
<p>My current set up will work in most cases. I live in a calm neighborhood
in a very safe city(not prone to natural calamities and such) but
<em>ideally</em> there should be at least one copy of offsite backup. So I did
some math to see how much it would cost me:</p>
<h3 id="aws-s3">AWS S3</h3>
<p>AWS is usually the cheapest and there&rsquo;s probably an adapter available
for Borg</p>
<ul>
<li><strong>pricing:</strong> <a href="https://aws.amazon.com/s3/pricing/">$0.023/GB-month for the first
50 TB</a></li>
<li><strong>cost:</strong> $0.023 * 3 * 1024 = $70.656/month</li>
</ul>
<p>But I don&rsquo;t like AWS or anything Amazon</p>
<h3 id="tarsnap">Tarsnap</h3>
<p>Tarsnap is developed by <a href="https://www.daemonology.net/blog/">Dr. Colin
Percival</a> and is quite popular.</p>
<ul>
<li><strong>pricing:</strong> <a href="https://www.tarsnap.com/">$0.25/GB-month + $0.25/GB
bandwidth</a></li>
<li><strong>cost:</strong> $0.25 * 3 * 1024 = $768/month + bandwidth costs</li>
</ul>
<p>And is also quite expensive!</p>
<p>I can&rsquo;t afford either of these solutions. My current setup set cost me
roughly â‚¹16,000 or $220 or the two months worth of AWS rent. Which is
ridiculous. So here&rsquo;s my proposal:</p>
<p>As the internet becomes more diverse and more decentralised, home
servers will become a common thing. This means more folks, like myself,
will be on the lookout for cheap backup and failover solutions.
Normally, these home servers won&rsquo;t be at 100% utilization(I&rsquo;m currently
at 20% across the fleet) so forming rings of trust among friends and
family will be mutually beneficial. This way, the participants within
the ring can rely on each other&rsquo;s facilities for backups and
failover situations for a fraction of what a cloud-based solution would
cost.</p>
<p>Of course, there should be proper measures taken to prevent unauthorized
access and trespassing, but they are implementation details.</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://batsense.net/tags/self-hosting/">self-hosting</a></span>
        <span class="tag"><a href="https://batsense.net/tags/rant/">rant</a></span>
        <span class="tag"><a href="https://batsense.net/tags/sysadmin/">sysadmin</a></span>
        
    </p>

            
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.ace63d93098bf623f7c286a9084a4c22bfc482944c734f87fe0b685c7c6c7fa0ad2edb028c3b4b60d3343720c8ab490b320ad7f8edf4f6e9a6b898fc529057a9.js" integrity="sha512-rOY9kwmL9iP3woapCEpMIr/EgpRMc0&#43;H/gtoXHxsf6CtLtsCjDtLYNM0NyDIq0kLMgrX&#43;O309ummuJj8UpBXqQ=="></script>



    </body>
</html>
